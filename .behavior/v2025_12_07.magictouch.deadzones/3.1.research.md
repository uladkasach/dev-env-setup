# Research: Magic Trackpad Dead Zones

## Device Info

- Device: Apple Inc. Magic Trackpad (ID 10)
- Vendor: 0x004C, Product: 0x0265
- Dimensions: 161mm x 115mm
- Node: /dev/input/event19
- Driver: libinput

## Findings

### libinput Edge Palm Detection

libinput has built-in edge palm detection on left, right, and top edges:
- Edge zones are **hardcoded at ~8%** of touchpad width (~13mm on this device)
- No quirk exists to adjust edge zone size directly
- Fast movements starting in edge zones are intentionally allowed through

Source: https://wayland.freedesktop.org/libinput/doc/latest/palm-detection.html

### Configurable Palm Detection via Quirks

Palm detection thresholds CAN be adjusted via `/etc/libinput/local-overrides.quirks`:

```ini
[Apple Magic Trackpad]
MatchVendor=0x004C
MatchProduct=0x0265
AttrPalmSizeThreshold=1200
AttrThumbSizeThreshold=800
AttrPressureRange=4:0
```

- `AttrPalmSizeThreshold` - touch size above which input is rejected as palm (default ~800)
- `AttrThumbSizeThreshold` - touch size for thumb detection
- `AttrPressureRange=N:M` - pressure thresholds for touch activation

Source: https://askubuntu.com/questions/1283762/custom-libinput-quirk-for-apple-magic-trackpad-2

### Coordinate Transformation Matrix

xinput's Coordinate Transformation Matrix can scale/offset the active area but cannot create true dead zones - it only transforms coordinates, not filters them.

Source: https://wiki.ubuntu.com/X/InputCoordinateTransformation

### Alternative: Custom evdev Filter

For true coordinate-based dead zones, a custom input filter reading from evdev would be required. This would intercept multitouch events and drop touches originating in specified rectangular regions.

## Options

1. **Quirks file** - Increase palm size thresholds for more aggressive rejection (simple, may help)
2. **Custom evdev filter** - Create a daemon that filters touch events by coordinate (complex, precise control)
