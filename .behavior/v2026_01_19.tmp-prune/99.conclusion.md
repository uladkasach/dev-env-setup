# conclusion

## decision

instead of an os-level prune utility for `$XDG_RUNTIME_DIR` or `/tmp`, we'll add a `genTempDir` utility to `test-fns`.

## why

- **explicit cleanup** — each test cleans up after itself, no ambient dependency
- **portable** — works across linux, macos, ci environments without os-specific config
- **predictable** — no race conditions with external prune timers
- **traceable** — test owns its lifecycle, easier to debug leftover artifacts

## pattern

```ts
import { genTempDir } from 'test-fns';

given('some scenario', () => {
  const tempDir = genTempDir(); // creates temp dir, registers cleanup

  // tempDir auto-removed after test suite completes
});
```

## interim

until all tests are ported to `genTempDir`, use the manual cleanup command:

```sh
bash .behavior/v2026_01_19.tmp-prune/cleanup-tmp.sh
```

## status

- [x] research: why popos doesn't auto-clean /tmp
- [x] research: risks of auto-clean (sockets, locks, apps in use)
- [x] research: $XDG_RUNTIME_DIR behavior
- [x] manual cleanup command created
- [ ] `genTempDir` added to `test-fns`
- [ ] tests ported to use `genTempDir`
